<div class="wrapper" [ngClass]="{ 'nav-collapsed': getSideBarState() }">
  <app-sidebar [pantalla]="'perfil'" ></app-sidebar>
  <app-navbar></app-navbar>
  <div class="page-wrapper">
    <div class="page-content-wrapper">
      <div class="page-content">
        <div class="col">
          <h6 class="mb-0 text-uppercase">Perfil</h6>
          <hr />
          <div class="card">
            <div class="card-body">
              <ul class="nav nav-tabs nav-warning" role="tablist">
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link active"
                    data-bs-toggle="tab"
                    href="#warninghome"
                    role="tab"
                    aria-selected="true"
                  >
                    <div class="d-flex align-items-center">
                      <div class="tab-icon">
                        <i class="bx bx-building-house font-18 me-1"></i>
                      </div>
                      <div class="tab-title">Productos</div>
                    </div>
                  </a>
                </li>

                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    data-bs-toggle="tab"
                    href="#warningprofile"
                    role="tab"
                    aria-selected="false"
                  >
                    <div class="d-flex align-items-center">
                      <div class="tab-icon">
                        <i class="bx bx-user-pin font-18 me-1"></i>
                      </div>
                      <div class="tab-title">Informacion</div>
                    </div>
                  </a>
                </li>
              </ul>

              <div class="tab-content py-3">
                <div
                  class="tab-pane fade show active"
                  id="warninghome"
                  role="tabpanel"
                >
                  <div class="row">
                    <div class="col-md-4">
                      <!-- Button trigger modal -->
                      <button
                        type="button"
                        class="btn btn-primary agregar"
                        data-bs-toggle="modal"
                        data-bs-target="#exampleLargeModal"
                      >
                        Agregar
                      </button>
                      <!-- Modal -->
                      <div
                        class="modal fade"
                        id="exampleLargeModal"
                        tabindex="-1"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">Agregar Inmuemble</h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>

                            <form autocapitalize=""
                                  [formGroup]="FormReactiveAgregar"
                                  (ngSubmit)="agregarHab()">

                              <div class="modal-body">


                                  <div class="form-group">
                                    <small class="form-text text-muted"
                                      >ej. Habitacion - Apartamento - Casa</small
                                    >
                                    <div class="input-group mb-3">
                                      <span
                                        class="input-group-text"
                                        id="basic-addon1"
                                      >
                                        <i class="bx bx-building-house"></i>
                                      </span>
                                      <input
                                        type="text"
                                        class="form-control"
                                        placeholder="Tipo de inmueble"
                                        aria-label="Tipo de inmueble"
                                        aria-describedby="basic-addon1"
                                        formControlName="type"
                                      />
                                    </div>
                                    <small *ngIf="campoValidA('type')" class="msg" > El tipo es obligatorio. </small>
                                  </div>



                                <div class="form-group">
                                  <div class="input-group mb-3">
                                    <span
                                      class="input-group-text"
                                      id="basic-addon1"
                                    >
                                      <i class="bx bx-building"></i>
                                    </span>
                                    <input
                                      type="text"
                                      class="form-control"
                                      placeholder="Ciudad"
                                      aria-label="Ciudad"
                                      aria-describedby="basic-addon1"
                                      formControlName="city"
                                    />
                                  </div>
                                  <small *ngIf="campoValidA('city')" class="msg" > La ciudad es obligatoria. </small>
                                </div>

                                <div class="form-group">
                                  <div class="input-group mb-3">
                                    <span
                                      class="input-group-text"
                                      id="basic-addon1"
                                    >
                                      <i class="bx bx-map"></i>
                                    </span>
                                    <input
                                      type="text"
                                      class="form-control"
                                      placeholder="Direccion"
                                      aria-label="Direccion"
                                      aria-describedby="basic-addon1"
                                      formControlName="address"
                                    />
                                  </div>
                                  <small *ngIf="campoValidA('address')" class="msg" > La direccion es obligatoria. </small>
                                </div>

                                <div class="form-group">
                                  <div class="input-group mb-3">
                                    <span
                                      class="input-group-text"
                                      id="basic-addon1"
                                    >
                                      <i class="bx bx-money"></i>
                                    </span>
                                    <input
                                      type="number"
                                      step="any"
                                      class="form-control"
                                      placeholder="Precio"
                                      aria-label="Precio"
                                      aria-describedby="basic-addon1"
                                      formControlName="price"
                                    />
                                  </div>
                                  <small *ngIf="campoValidA('price')" class="msg" > El precio es obligatorio. </small>
                                </div>

                                <div class="form-group">
                                  <div class="input-group mb-3">
                                    <span
                                      class="input-group-text"
                                      id="basic-addon1"
                                    >
                                      <i class="bx bx-notepad"></i>
                                    </span>
                                    <textarea
                                      type="text"
                                      class="form-control"
                                      placeholder="Descripcion"
                                      aria-label="Descripcion"
                                      aria-describedby="basic-addon1"
                                      rows="1"
                                      formControlName="desc"
                                    ></textarea>
                                  </div>
                                  <small *ngIf="campoValidA('desc')" class="msg" > Agregue una descripción. </small>
                                </div>

                                <div class="card radius-15">
                                  <div class="card-body">
                                    <div class="card-title">
                                      <h4 class="mb-0">Imagenes</h4>
                                    </div>
                                    <hr />
                                    <input
                                      id="image-uploadify"
                                      type="file"
                                      accept="image/*"
                                      multiple
                                      formControlName="images"
                                      (change)="capturarFile($event)"
                                    />
                                  </div>
                                  <small *ngIf="campoValidA('images')" class="msg" > Agregue por lo menos una imagen. </small>
                                  <div class="card-footer">
                                    <small
                                      >Se recomienda subir imagenes de forma
                                      horzonales</small
                                    >
                                  </div>
                                </div>


                              </div>

                              <div class="modal-footer">
                                <button type="submit" class="btn btn-primary" [disabled]="FormReactiveAgregar.invalid">
                                  Agregar
                                </button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">

                      <div class="col-md-4" *ngFor="let product of products" >
                        <div class="card">

                          <img [src]="product.imgs" alt="">

                          <div class="card-body">
                            <h6 class="card-title cursor-pointer">
                              {{product.type}}
                            </h6>
                            <hr />
                            <div class="clearfix">
                              <p class="mb-0 float-start">
                                <strong></strong> {{product.address}}
                              </p>
                              <p class="mb-0 float-end fw-bold">
                                <span class="me-2 text-secondary">
                                  <strong>{{product.city}}</strong>
                                </span>
                              </p>
                            </div>
                            <div class="clearfix">
                              <p class="mb-0 float-start">
                                {{product.desc}}
                              </p>
                            </div>
                            <div class="d-flex align-items-center mt-3 fs-6">
                              <div>
                                <a
                                  class="d-flex align-items-center nav-link dropdown-toggle dropdown-toggle-nocaret"
                                  href="#"
                                  role="button"
                                  data-bs-toggle="dropdown"
                                  aria-expanded="false"
                                  (click)="deleteProduct(product.uid)"
                                >
                                  <i
                                    class="cursor-pointer bx bxs-trash icon-trash"
                                  ></i>
                                </a>
                              </div>
                              <p class="mb-0 ms-auto">{{product.price  | currency: 'COP': '$': '1.2-2'}}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                  <div
                    class="tab-pane fade"
                    id="warningprofile"
                    role="tabpanel"
                  >
                    <div class="container">
                      <div class="main-body">
                        <div class="row">
                          <div class="col-lg-4">
                            <div class="card">
                              <div class="card-body">
                                <div
                                  class="d-flex flex-column align-items-center text-center"
                                >
                                  <img
                                    [src]="user.img"
                                    alt="Admin"
                                    class="rounded-circle p-1 bg-primary"
                                    width="110"
                                  />
                                  <div class="mt-3">
                                    <h4>{{user.name}} {{user.lastName}} </h4>
                                    <hr />
                                    <p class="text-secondary mb-1">
                                      {{user.email}}
                                    </p>
                                    <p class="text-secondary mb-1">{{user.phone}}</p>
                                    <p class="text-muted font-size-sm">
                                      {{user.city}}
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="col-lg-8">
                            <div class="card tarjeta-form">
                              <div class="card-body">

                                <form autocomplete="off"
                                      [formGroup]="FormReactive"
                                      (ngSubmit)="updateInfo()">

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Nombre</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <input
                                        type="text"
                                        class="form-control"
                                        formControlName="name"
                                      />
                                      <small *ngIf="campoValid('name')" class="msg" > {{nameMsg}} </small>
                                    </div>
                                  </div>

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Apellido</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <input
                                        type="text"
                                        class="form-control"
                                        formControlName="lastName"
                                      />
                                      <small *ngIf="campoValid('lastName')" class="msg" > {{lastNameMsg}} </small>
                                    </div>
                                  </div>

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Telefono</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <input
                                        type="text"
                                        class="form-control"
                                        formControlName="phone"
                                      />
                                      <small *ngIf="campoValid('phone')" class="msg" > El teléfono debe tener 10 números y solo debe contener números. </small>
                                    </div>
                                  </div>

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Ciudad</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <input
                                        type="text"
                                        class="form-control"
                                        formControlName="city"
                                      />
                                      <small *ngIf="campoValid('city')" class="msg" > La ciudad es obligatoria. </small>
                                    </div>

                                  </div>

                                  <div class="row">
                                    <div class="col-sm-3"></div>
                                    <div class="col-sm-9 text-secondary">
                                      <button
                                        type="submit"
                                        class="btn btn-primary px-4"
                                        [disabled]="FormReactive.invalid"
                                      > <i class='bx bx-analyse'></i>Guardar Cambios </button>
                                    </div>
                                  </div>



                                </form>




                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-sm-12">
                            <div class="card">
                              <div class="card-body">
                                <h5 class="d-flex align-items-center mb-3">
                                  Cambiar Contraseña
                                </h5>

                                <form autocomplete="off"
                                      [formGroup]="FormReactivePassword"
                                      (ngSubmit)="onUpdatePassword()">
                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Contraseña Actual</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <div class="input-group" id="show_hide_password">
                                        <input
                                        [type]=" hide ? 'password' : 'text' "
                                          class="form-control"
                                          value=""
                                          formControlName="passwordA"
                                        />
                                        <a  (click)="hide = !hide" class="input-group-text bg-transparent">
                                          <i [class]="hide ? 'bx bx-hide' : 'bx bx-show' "></i></a>
                                      </div>

                                      <small *ngIf="campoValidP('passwordA')" class="msg" > La contraseña no coincide con la actual. </small>
                                    </div>
                                  </div>

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">Contraseña Nueva</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <div class="input-group" id="show_hide_password">
                                        <input
                                        [type]=" hide ? 'password' : 'text' "
                                          class="form-control"
                                          value=""
                                          formControlName="password"
                                        />
                                        <a  (click)="hide = !hide" class="input-group-text bg-transparent">
                                          <i [class]="hide ? 'bx bx-hide' : 'bx bx-show' "></i></a>
                                      </div>
                                      <small *ngIf="campoValidP('password')" class="msg" > La contraseña debe tener mínimo 8 caracteres. </small>
                                    </div>
                                  </div>

                                  <div class="row mb-3">
                                    <div class="col-sm-3">
                                      <h6 class="mb-0">
                                        Repita de Nuevo la Contraseña
                                      </h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                      <div class="input-group" id="show_hide_password">
                                        <input
                                        [type]=" hide ? 'password' : 'text' "
                                          class="form-control"
                                          value=""
                                          formControlName="passwordv"
                                        />
                                        <a  (click)="hide = !hide" class="input-group-text bg-transparent">
                                          <i [class]="hide ? 'bx bx-hide' : 'bx bx-show' "></i></a>
                                      </div>
                                      <small *ngIf="campoValidP('passwordv')" class="msg" > Las contraseñas no coinciden. </small>
                                    </div>
                                  </div>

                                  <div class="row">
                                    <div class="col-sm-3"></div>
                                    <div class="col-sm-9 text-secondary">
                                      <button
                                        type="submit"
                                        class="btn btn-primary px-4"
                                        [disabled]="FormReactivePassword.invalid"
                                      > <i class='bx bx-analyse'></i> Cambiar Contraseña </button>
                                    </div>
                                  </div>

                                </form>


                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

              </div>
            </div>
          </div>

          <div
            class="overlay"
            (click)="toggleSidebar()"
            [ngClass]="{ show: getSideBarState() }"
          ></div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
  </div>
  <app-color-switcher></app-color-switcher>
</div>
